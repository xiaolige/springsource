/**
 *  =====================================================================
 * @tencent/aegis-web-sdk@1.32.20 (c) 2021 Tencent Application Monitor.
 * Author pumpkincai.
 * Last Release Time Wed Mar 24 2021 14:41:17 GMT+0800 (GMT+08:00).
 * Released under the MIT License.
 * Thanks for supporting TAM & Aegis!
 * =====================================================================
 **/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Aegis=t()}(this,function(){"use strict";function g(e){return(e=Array.isArray(e)?e:[e]).map(function(t,n){return Object.getOwnPropertyNames(t).map(function(e){return o(e)+"["+n+"]="+(void 0===t[e]?"":o(t[e]))}).join("&")}).join("&")+(e.length?"&count="+e.length:"")}var v,t=(e.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},e.prototype.on=function(e,t,n){if(void 0===n&&(n=0),this){var o=this.EventsList[e];return(o||(this.EventsList[e]=[],o=this.EventsList[e]),-1!==this.indexOf(o,t))?this:(o.push({name:e,type:n||0,callback:t}),this)}},e.prototype.one=function(e,t){this.on(e,t,1)},e.prototype.remove=function(e,t){if(this){var n=this.EventsList[e];if(!n)return null;if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.EventsList[e]}catch(e){}return null}},e),o=function(t){try{return encodeURIComponent(decodeURIComponent(t))}catch(e){return t}};function e(){var s=this;this.emit=function(e,t){if(s){var n;if(null!=(o=s.EventsList[e])&&o.length)for(var o=o.slice(),i=0;i<o.length;i++){n=o[i];try{var r=n.callback.apply(s,[t]);if(1===n.type&&s.remove(e,n.callback),!1===r)break}catch(e){throw e}}return s}},this.EventsList={}}(Z=v=v||{})[Z.number=-1]="number",Z.string="";function i(e,t){return"number"==typeof e||"string"==typeof e?e:t?v.string:v.number}function y(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e}function w(e){return/^https/.test(e)}function a(){return void 0!==window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now}function r(t){return n.some(function(e){return-1!==t.indexOf(e)})}function b(e){if("string"==typeof e)return e;try{return(JSON.stringify(e,(o=[],i=[],function(e,t){if(t instanceof Error)return"Error.message: "+t.message+" \n  Error.stack: "+t.stack;if("object"==typeof t&&null!==t){var n=o.indexOf(t);if(-1!==n)return"[Circular "+i[n]+"]";o.push(t),i.push(e||"root")}return t}),4)||"undefined").replace(/"/gim,"")}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}var o,i}var E,m,n=["application/octet-stream","application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/ogg","text/html","text/css","text/javascript","image","audio","video"],s=["ret","retcode","code"],R=function(e,t){var n,o;try{"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null===(n=null==t?void 0:t.ret)||void 0===n?void 0:n.join)&&(s=[].concat(null===(o=null==t?void 0:t.ret)||void 0===o?void 0:o.map(function(e){return e.toLowerCase()})));var i=Object.getOwnPropertyNames(e).filter(function(e){return-1!==s.indexOf(e.toLowerCase())});return i.length?""+e[i[0]]:"unknown"}catch(e){return"unknown"}},O=(c.prototype.sourceURL=function(){return this.data.responseURL},c.prototype.status=function(){return Number(this.data.status)},c.prototype.headers=function(){var e=this.data.getAllResponseHeaders().split("\n"),n={};return e.forEach(function(e){var t;e&&(e=(t=e.split(": "))[0],t=t[1].trim(),n[e]=t)}),n},c),p=(u.prototype.sourceURL=function(){return this.data.url},u.prototype.status=function(){return Number(this.data.status)},u.prototype.headers=function(){var n={};return this.data.headers.forEach(function(e,t){n[t]=e}),n},u);function u(e,t){this.type="fetch",this.data=e||{},this.data.response=t}function c(e){this.type="xhr",this.data=e}(te=E=E||{}).INFO_ALL="-1",te.API_RESPONSE="1",te.INFO="2",te.ERROR="4",te.PROMISE_ERROR="8",te.AJAX_ERROR="16",te.SCRIPT_ERROR="32",te.IMAGE_ERROR="64",te.CSS_ERROR="128",te.CONSOLE_ERROR="256",te.MEDIA_ERROR="512",te.RET_ERROR="1024",te.REPORT="2048",(ne=m=m||{}).LOG="log",ne.SPEED="speed",ne.PERFORMANCE="performance",ne.OFFLINE="offline",ne.WHITE_LIST="whiteList",ne.VITALS="vitals",ne.PV="pv",ne.EVENT="event",ne.CUSTOM="custom",ne.SDK_ERROR="sdkError";function l(e,t){return Array.isArray(e)?t(e.map(function(e){return{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(b).join(" "),level:e.level,trace:e.trace}})):t({msg:"string"==typeof e.msg?e.msg:b(e.msg),level:e.level,trace:e.trace})}function f(){}var d=function(n,o){var i,r=[];return function(e,t){if(r.push(e),o&&r.length>=o)return t(r.splice(0,r.length)),void(i&&clearTimeout(i));i&&clearTimeout(i),i=setTimeout(function(){i=null,t(r.splice(0,r.length))},n.delay||1e3)}},h=function(o){var i={};return function(e,t){var n;o.speedSample?Array.isArray(e)?(n=e.filter(function(e){var t=!i[e.url];return i[e.url]=!0,t})).length&&t(n):(i[e.url]||t(e),i[e.url]=!0):t(e)}},x=function(n){if(!n||!n.reduce||!n.length)throw new TypeError("createPipeline need at least one function param");return 1===n.length?function(e,t){n[0](e,t||f)}:n.reduce(function(n,o){return function(e,t){return void 0===t&&(t=f),n(e,function(e){return null==o?void 0:o(e,t)})}})},S=(P.prototype.init=function(e){this.setConfig(e);for(var t=0;t<P.installedPlugins.length;t++)try{P.installedPlugins[t].patch(this)}catch(e){this.sendSDKError(e)}this.lifeCycle.emit("onInited")},P.prototype.setConfig=function(e){Object.assign(this.config,e);var t=this.config,n=t.id,o=t.uin,i=t.version,t=this.bean.id!==n||this.bean.uin!==o;return this.bean.id=n||"",this.bean.uin=o||"",this.bean.version=i||"1.32.20",t&&this.lifeCycle.emit("onConfigChange",e),this.config},P.use=function(e){-1===P.installedPlugins.indexOf(e)&&e.aegisPlugin&&P.installedPlugins.push(e)},P.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.normalLogPipeline({msg:e,level:E.INFO})},P.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.normalLogPipeline({msg:e,level:E.INFO_ALL})},P.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.normalLogPipeline({msg:e,level:E.REPORT})},P.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.normalLogPipeline({msg:e,level:E.ERROR})},P.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},P.prototype.reportPv=function(e){var t,n=this;e&&(t=""+Object.getOwnPropertyNames(this.bean).filter(function(e){return"id"!==e}).map(function(e){return e+"="+n.bean[e]}).join("&"),this.send({url:this.config.url+"/"+e+"?"+t,addBean:!1,type:m.PV}))},P.prototype.reportEvent=function(e){e&&this.eventPipeline(e)},P.prototype.reportTime=function(e,t){"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},P.prototype.reportT=function(e){var t=e.name,n=e.duration,o=e.ext1,i=void 0===o?"":o,r=e.ext2,o=void 0===r?"":r,r=e.ext3,r=void 0===r?"":r,e=e.from;if("string"==typeof t&&"number"==typeof n&&"string"==typeof i&&"string"==typeof o&&"string"==typeof r){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,i,o,r,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},P.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},P.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},P.prototype.submitCustomTime=function(e,t,n,o,i,r){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:o||this.config.ext2,ext3:i||this.config.ext3,from:r||void 0})},P.prototype.extendBean=function(e,t){this.bean[e]=t},P.prototype.send=function(e,t,n){throw new Error('You need to override "send" method')},P.prototype.sendSDKError=function(e){this.send({url:"https://aegis.qq.com/collect?id=1085&msg[0]="+encodeURIComponent(b(e))+"&level[0]=2&from="+this.config.id+"&count=1&version="+this.config.id+"(1.32.20)",addBean:!1,method:"get",type:m.SDK_ERROR})},P.LOG_TYPE=E,P.installedPlugins=[],P),L=(A.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},A.prototype.walk=function(n){var o=this;this.instances.forEach(function(e){var t=o.canUse(e);t&&n(e,t)})},A.prototype.canUse=function(e){e=this.getConfig(e);return!(!e||"object"!=typeof e)||!!e},A.prototype.getConfig=function(e){return e.config[this.name]},A.prototype.exist=function(e){return-1===this.instances.indexOf(e)},A.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null===(t=null===(t=this.option)||void 0===t?void 0:t.init)||void 0===t||t.call(this.option,this.getConfig(e)))},A.prototype.triggerOnNewAegis=function(e){var t;null===(t=null===(t=this.option)||void 0===t?void 0:t.onNewAegis)||void 0===t||t.call(this.option,e,this.getConfig(e))},A),T=new L({name:"aid",aid:"",init:function(){try{var e=window.localStorage.getItem("AEGIS_ID");e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),window.localStorage.setItem("AEGIS_ID",e)),this.aid=e}catch(e){}},onNewAegis:function(e){e.bean.aid=this.aid}}),C=(new L({name:"reportAssetSpeed"}),new L({name:"reportAssetSpeed",collectCur:0,ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;a()&&(this.collectSuccLog(e.config),this.collectFailLog(e.config),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(t){this.$walk(function(e){e.speedLogPipeline(t)})},collectSuccLog:function(i){function n(e){for(var t=0,n=e.length;t<n;t++){var o=e[t];-1!==r.ASSETS_INITIATOR_TYPE.indexOf(o.initiatorType)&&-1===o.name.indexOf("cdn-go.cn/aegis/aegis-sdk")&&r.publish(r.generateLog(o,i))}}var r=this;"function"==typeof window.PerformanceObserver?(n(performance.getEntriesByType("resource")),new window.PerformanceObserver(function(e){n(e.getEntries())}).observe({entryTypes:["resource"]})):setInterval(function(){var e=performance.getEntriesByType("resource"),t=e.slice(r.collectCur);r.collectCur=e.length,n(t)},3e3)},collectFailLog:function(o){var i=this;window.document.addEventListener("error",function(e){var t,n;e&&(e=(null==(t=e.target||e.srcElement)?void 0:t.src)||(null==t?void 0:t.href),n="function"==typeof(null===(t=null==o?void 0:o.api)||void 0===t?void 0:t.resourceTypeHandler)?null===(n=null==o?void 0:o.api)||void 0===n?void 0:n.resourceTypeHandler(e):"",e&&(e={url:y(e),status:400,method:"get",type:n||"static",isHttps:w(e),urlQuery:y(e,!0),x5ContentType:v.string,x5HttpStatusCode:v.number,x5ImgDecodeStatus:v.number,x5ErrorCode:v.number,x5LoadFromLocalCache:v.number,x5ContentLength:v.number,domainLookup:v.number,connectTime:v.number},i.publish(e)))},!0)},generateLog:function(e,t){var n,o="function"==typeof(null===(n=null==t?void 0:t.api)||void 0===n?void 0:n.resourceTypeHandler)?null===(o=null==t?void 0:t.api)||void 0===o?void 0:o.resourceTypeHandler(e.name):"";return{url:y(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:o||"static",isHttps:w(e.name),urlQuery:y(e.name,!0),x5ContentType:i(e.x5ContentType,!0),x5HttpStatusCode:i(e.x5HttpStatusCode),x5ImgDecodeStatus:i(e.x5ImgDecodeStatus),x5ErrorCode:i(e.x5ErrorCode),x5LoadFromLocalCache:void 0===e.x5LoadFromLocalCache?v.number:0|e.x5LoadFromLocalCache,x5ContentLength:e.encodedBodySize||i(e.x5ContentLength),domainLookup:i(e.domainLookupEnd-e.domainLookupStart),connectTime:i(e.connectEnd-e.connectStart)}}})),I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function A(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function P(e){var o,i,r,s,a=this;this.config={version:0,delay:1500,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,url:"https://aegis.qq.com/collect",speedUrl:"https://aegis.qq.com/speed",customTimeUrl:"https://aegis.qq.com/speed/custom",whiteListUrl:"https://aegis.qq.com/aegis/whitelist",performanceUrl:"https://aegis.qq.com/speed/performance",webVitalsUrl:"https://aegis.qq.com/speed/webvitals",eventUrl:"https://aegis.qq.com/collect/events",listenOnerror:!0},this.isWhiteList=!1,this.lifeCycle=new t,this.bean={},this.normalLogPipeline=x([d(this.config,5),l,(r=this.config,s={},function(e,t){var n="number"==typeof r.repeat?r.repeat:5;if(0===n)return t(e);t(e.filter(function(e){return e.level!==E.ERROR&&e.level!==E.PROMISE_ERROR&&e.level!==E.AJAX_ERROR&&e.level!==E.SCRIPT_ERROR&&e.level!==E.IMAGE_ERROR&&e.level!==E.CSS_ERROR&&e.level!==E.MEDIA_ERROR||(s[e.msg]=s[e.msg]||0,s[e.msg]+=1,!(s[e.msg]>n))}))}),(o=this.lifeCycle.emit,i=this.config,function(e,t){var n=i.logCreated;if("function"!=typeof n)return o("beforeWrite",e),t(e);e=e.filter(function(e){return!1!==n(e)});return o("beforeWrite",e),t(e)}),function(n){var e,o=!1,i=!1,t=!1;n.lifeCycle.on("onConfigChange",function(){e&&clearTimeout(e),e=setTimeout(function(){t||(t=!0,n.send({url:n.config.whiteListUrl||"",type:m.WHITE_LIST},function(e){i=!0;try{0===(e=JSON.parse(e)||{}).retcode&&(o=e.result.is_in_white_list,n.isWhiteList=o);var t=n.config.onWhitelist;"function"==typeof t&&t(o)}catch(e){}},function(){i=!0}))},n.config.uin?50:500)});var r=[],s=!1;return function(e,t){!s&&e.some(function(e){return e.level===E.ERROR})&&(s=!0),o||s?t(e.concat(r.splice(0)).map(function(e){return e.level===E.INFO_ALL&&(e.level=E.INFO),e})):(e=e.filter(function(e){return e.level!==E.INFO&&e.level!==E.API_RESPONSE?(e.level===E.INFO_ALL&&(e.level=E.INFO),!0):(i||(r.push(e),200<=r.length&&(r.length=200)),!1)})).length&&t(e)}}(this),function(e,t){var n=JSON.parse(JSON.stringify(e));a.lifeCycle.emit("beforeReport",n);var o=a.config.beforeReport;if((e="function"==typeof o?e.filter(function(e){return!1!==o(e)}):e).length)return t(e)},function(e){a.send({url:a.config.url||"",data:g(e),method:"post",contentType:"application/x-www-form-urlencoded",type:m.LOG},function(){var t=a.config.onReport;"function"==typeof t&&e.forEach(function(e){t(e)})})}]),this.eventPipeline=x([d(this.config,5),function(e){a.send({url:a.config.eventUrl+"?"+e.map(function(e,t){return"event["+t+"]="+encodeURIComponent(e)}).join("&"),type:m.EVENT})}]),this.timeMap={},this.customTimePipeline=x([d(this.config,10),function(e){a.send({url:a.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:m.CUSTOM})}])}var N=function(){return(N=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function k(e){var n,o;D.push(e),!q&&window.XMLHttpRequest&&(q=!0,n=window.XMLHttpRequest.prototype.send,o=window.XMLHttpRequest.prototype.open,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],!this.sendByAegis)for(var e=0;e<D.length;e++){var t=D[e];try{"function"==typeof t.open&&t.open(this)}catch(e){}}return o.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<D.length;e++){var t=D[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(e){}}return n.apply(this,arguments)})}function _(e){var s;M.push(e),!U&&window.fetch&&(U=!0,s=window.fetch,window.fetch=function(e,o){void 0===o&&(o={});for(var i="string"==typeof e?e:e.url,t=0;t<M.length;t++){var n=M[t];try{"function"==typeof n.beforeFetch&&n.beforeFetch(i,o)}catch(e){}}var r=Date.now();return s(e,o).then(function(e){for(var t=0;t<M.length;t++){var n=M[t];try{"function"==typeof n.then&&n.then(e,Date.now()-r,i,o)}catch(e){}}return e}).catch(function(e){for(var t=0;t<M.length;t++){var n=M[t];try{"function"==typeof n.catch&&n.catch(e,Date.now()-r,i,o)}catch(e){}}throw e})})}var F,j,H,q=!1,D=[],U=!1,M=[],B=(new L({name:"reportApiSpeed"}),new L({name:"reportApiSpeed",override:!1,onNewAegis:function(e,t){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},overrideFetch:function(f){var d=this;_({then:function(s,a,u,c){var e,t,n,l={url:s.url,isHttps:w(s.url),method:(null==c?void 0:c.method)||"get",duration:a,type:"fetch",status:s.status};"fetch"!==(n="function"==typeof(null===(e=null==f?void 0:f.api)||void 0===e?void 0:e.resourceTypeHandler)?null===(t=null==f?void 0:f.api)||void 0===t?void 0:t.resourceTypeHandler(s.url):n)&&"static"!==n&&(t=s.headers?s.headers.get("content-type"):"",n=s.ok&&"string"==typeof t&&r(t)?"static":"fetch"),"fetch"===n?s.clone().text().then(function(e){var t,n="req url: "+u+" \n                                \nreq method: "+((null==c?void 0:c.method)||"get")+" \n                                \nreq param: "+b(null==c?void 0:c.body)+" \n                                \nres duration: "+a+" \n                                \nres status: "+s.status+" \n                                \nres data: "+e;d.publishNormalLog({msg:n,level:E.API_RESPONSE}),l.payload=new p(s,e);var o,i,r;("function"==typeof(null===(t=null==f?void 0:f.api)||void 0===t?void 0:t.retCodeHandler)?(r=(i=f.api.retCodeHandler(e,s.url,s)).code,o=i.isErr,l.ret=r,o):(i=R(e,f.api),l.ret=i,e=(e=null===(o=f.api)||void 0===o?void 0:o.errCode)&&[].concat(e),r=(r=null===(o=f.api)||void 0===o?void 0:o.code)&&[].concat(r),e&&-1!==e.indexOf(i)||r&&-1===r.indexOf(i)||!e&&!r&&"0"!==i&&"unknown"!==i))&&d.publishNormalLog({msg:n,level:E.RET_ERROR})}):Object.assign(l,{type:"static",urlQuery:y(s.url,!0),x5ContentType:v.string,x5HttpStatusCode:v.number,x5ImgDecodeStatus:v.number,x5ErrorCode:v.number,x5LoadFromLocalCache:v.number,x5ContentLength:v.number,domainLookup:v.number,connectTime:v.number}),d.publishSpeed(l)},catch:function(e,t,n,o){t={url:n,isHttps:w(n),method:(null==o?void 0:o.method)||"get",duration:t,type:"fetch",status:600};d.publishSpeed(t)}})},getRequestType:function(e,t,n){var o,i="function"==typeof(null===(o=null==e?void 0:e.api)||void 0===o?void 0:o.resourceTypeHandler)?null===(i=null==e?void 0:e.api)||void 0===i?void 0:i.resourceTypeHandler(n):"";return"fetch"!==i&&"static"!==i&&(n=t.getResponseHeader("content-type"),i=400<=t.status||"string"!=typeof n||!r(n)?"fetch":"static"),i},overrideXhr:function(g){var m=this;k({send:function(d,p){var h=Date.now();d.addEventListener("loadend",function(){var e,t,n,o=d.aegisUrl;if(o){var i=Date.now()-h,r={url:o,isHttps:w(o),status:d.status,method:d.aegisMethod||"get",type:"fetch",duration:i,payload:new O(d)};if("fetch"===m.getRequestType(g,d,o))try{var s="req url: "+o+" \n                                \nreq method: "+(d.aegisMethod||"get")+" \n                                \nreq param: "+b(p)+" \n                                \nres duration: "+i+" \n                                \nres status: "+d.status+" \n                                \nres data: "+b(d.response);m.publishNormalLog({msg:s,level:E.API_RESPONSE,trace:d.aegisTjgTrace});var a,u,c,l,f;("function"==typeof(null===(e=null==g?void 0:g.api)||void 0===e?void 0:e.retCodeHandler)?(f=(a=g.api.retCodeHandler(d.response,o,d)).code,u=a.isErr,r.ret=f,u):(c=R(d.response,g.api),r.ret=c,l=(l=null===(t=g.api)||void 0===t?void 0:t.errCode)&&[].concat(l),f=(f=null===(n=g.api)||void 0===n?void 0:n.code)&&[].concat(f),l&&-1!==l.indexOf(c)||f&&-1===f.indexOf(c)||!l&&!f&&"0"!==c&&"unknown"!==c))&&m.publishNormalLog({msg:s,level:E.RET_ERROR})}catch(e){r.ret="unknown"}else Object.assign(r,{type:"static",urlQuery:y(o,!0),x5ContentType:v.string,x5HttpStatusCode:v.number,x5ImgDecodeStatus:v.number,x5ErrorCode:v.number,x5LoadFromLocalCache:v.number,x5ContentLength:v.number,domainLookup:v.number,connectTime:v.number});m.publishSpeed(r)}})}})},publishSpeed:function(n){var o=this;n.url=y(n.url),this.$walk(function(e){var t=o.$getConfig(e);"fetch"===n.type&&t&&"function"==typeof t.urlHandler?e.speedLogPipeline(N(N({},n),{url:encodeURIComponent(t.urlHandler(n.url,n.payload))})):e.speedLogPipeline(n)})},publishNormalLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})}}));(re=F=F||{})[re.unknown=100]="unknown",re[re.wifi=1]="wifi",re[re.net2g=2]="net2g",re[re.net3g=3]="net3g",re[re.net4g=4]="net4g",re[re.net5g=5]="net5g",re[re.net6g=6]="net6g",(ae=j=j||{})[ae.android=1]="android",ae[ae.ios=2]="ios",ae[ae.windows=3]="windows",ae[ae.macos=4]="macos",ae[ae.linux=5]="linux",ae[ae.other=100]="other",(fe=H=H||{})[fe.oldX5=1]="oldX5",fe[fe.newX5=2]="newX5",fe[fe.other=3]="other";function X(e){return{name:e,value:1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,delta:0,entries:[],id:"".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),isFinal:!1}}function J(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(e){return e.getEntries().map(t)});return n.observe({type:e,buffered:!0}),n}}catch(e){}}function V(e){oe=!e.persisted}function G(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];ie||(addEventListener("pagehide",V),addEventListener("beforeunload",function(){}),ie=!0),addEventListener("visibilitychange",function(e){e=e.timeStamp;"hidden"===document.visibilityState&&t({timeStamp:e,isUnloading:oe})},{capture:!0,once:e})}function $(e,t,n,o){var i;return function(){n&&t.isFinal&&n.disconnect(),0<=t.value&&(o||t.isFinal||"hidden"===document.visibilityState)&&(t.delta=t.value-(i||0),(t.delta||t.isFinal||void 0===i)&&(e(t),i=t.value))}}function W(){return void 0===Y&&(Y="hidden"===document.visibilityState?0:1/0,G(function(e){e=e.timeStamp;return Y=e},!0)),{get timeStamp(){return Y}}}function Q(t){if(t.payload){var n={};return Object.keys(t).forEach(function(e){"payload"!==e&&(n[e]=t[e])}),n}return t}var K,Y,z,Z=new L({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("x5Type",this.getX5Type()),e.extendBean("netType",F.unknown),this.refreshNetworkTypeToBean(e)},getPlatform:function(){var t={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},e=Object.keys(t).find(function(e){return t[e].test(navigator.userAgent)});return e?j[e]:j.other},getX5Type:function(){var e,t=H.other;return t=0<=navigator.userAgent.toLowerCase().indexOf("tbs")?null!=(e=navigator.userAgent.match(/tbs\/([\d.]+)/i))&&e[1]&&36541<=parseInt(e[1],10)?H.newX5:H.oldX5:t},refreshNetworkTypeToBean:function(t){var n=this,e=t.config;("function"==typeof e.getNetworkType?e.getNetworkType:ee)(function(e){F[e]||(e=F.unknown),t.extendBean("netType",e),n.NetworkRefreshTimer=setTimeout(function(){n.refreshNetworkTypeToBean(t),clearTimeout(n.NetworkRefreshTimer)},1e4)})}}),ee=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((t=t=t||"unknown",0<=(t=String(t).toLowerCase()).indexOf("4g")?F.net4g:0<=t.indexOf("wifi")?F.wifi:0<=t.indexOf("5g")?F.net5g:0<=t.indexOf("6g")?F.net6g:0<=t.indexOf("3g")?F.net3g:0<=t.indexOf("2g")?F.net2g:F.unknown))},te=(new L({name:"onError"}),new L({name:"onError",init:function(){this.startListen()},startListen:function(){var o=this,n=window.onerror;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.publishErrorLog({msg:(b(e[0])||"")+" @ ("+(b(e[1])||"")+":"+(e[2]||0)+":"+(e[3]||0)+")",level:E.ERROR}),null==n||n.call.apply(n,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var o=Array(e),i=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}([window],e))},window.addEventListener("unhandledrejection",function(e){e=e&&b(e.reason);o.publishErrorLog({msg:"PROMISE_ERROR: "+e,level:E.PROMISE_ERROR})}),window.document.addEventListener("error",function(e){if(e&&e.target&&e.srcElement){var t=e.target||e.srcElement,e=t.src||t.href,t=t.tagName;if("string"==typeof e&&-1===(null==e?void 0:e.indexOf("aegis.qq.com"))&&t){var n={msg:t+" load fail: "+e,level:E.INFO};switch(t.toLowerCase()){case"script":n.level=E.SCRIPT_ERROR;break;case"link":n.level=E.CSS_ERROR;break;case"img":n.level=E.IMAGE_ERROR;break;case"audio":case"video":n.level=E.MEDIA_ERROR;break;default:return}o.publishErrorLog(n)}}},!0);var i=this;k({send:function(e,t){e.addEventListener("loadend",function(){var e="";this.aegisTimeout?e="timeout":this.status<=0?e="failed":400<=this.status&&(e="error"),e&&i.publishErrorLog({msg:"AJAX_ERROR: request "+e+". status: "+this.status+". \n \n                    url: "+this.aegisUrl+". \n \n                    method: "+this.aegisMethod+". \n\n                    request body: "+b(t)+".",level:E.AJAX_ERROR})}),e.addEventListener("timeout",function(){e.aegisTimeout=!0})}})},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})}})),ne=(new L({name:"pagePerformance"}),new L({name:"pagePerformance",onNewAegis:function(o){var i=this;if(a())if(K)this.publish(K,o);else try{this.getFirstScreenTiming(o,function(e){var t,n=performance.timing;n&&(t=n.loadEventStart-n.domInteractive,K={dnsLookup:n.domainLookupEnd-n.domainLookupStart,tcp:n.connectEnd-n.connectStart,ssl:0===n.secureConnectionStart?0:n.requestStart-n.secureConnectionStart,ttfb:n.responseStart-n.requestStart,contentDownload:n.responseEnd-n.responseStart,domParse:n.domInteractive-n.domLoading,resourceDownload:t=t<0?1070:t,firstScreenTiming:Math.floor(e)},i.publish(K,o))})}catch(o){}},publish:function(e,t){var n,o=[];for(n in e)o.push(n+"="+e[n]);var i=this.$getConfig(t),r=-1===t.config.performanceUrl.indexOf("?")?"?":"&";"function"==typeof i.urlHandler?t.send({url:t.config.performanceUrl+r+o.join("&")+"&from="+(encodeURIComponent(i.urlHandler())||window.location.href),beanFilter:["from"],type:m.PERFORMANCE}):t.send({url:t.config.performanceUrl+r+o.join("&"),type:m.PERFORMANCE})},getFirstScreenTiming:function(c,l){var n=["script","style","link","br"],f=[],d=this,p={},h=new MutationObserver(function(e){var t={roots:[],rootsDomNum:[],time:performance.now()};e.forEach(function(e){e&&e.addedNodes&&e.addedNodes.forEach&&e.addedNodes.forEach(function(e){1===e.nodeType&&(e.hasAttribute("AEGIS-FIRST-SCREEN-TIMING")||e.querySelector("[AEGIS-FIRST-SCREEN-TIMING]"))?(Object.prototype.hasOwnProperty.apply(p,[t.time])||(p[t.time]=[]),p[t.time].push(e)):1!==e.nodeType||-1!==n.indexOf(e.nodeName.toLocaleLowerCase())||d.isEleInArray(e,t.roots)||e.hasAttribute("AEGIS-IGNORE-FIRST-SCREEN-TIMING")||(t.roots.push(e),t.rootsDomNum.push(d.walkAndCount(e)||0))})}),t.roots.length&&f.push(t)});h.observe(document,{childList:!0,subtree:!0}),setTimeout(function(){h.disconnect();var n=0,o=0,i=!1,e=Object.keys(p).filter(function(e){return p[+e].find(function(e){return d.isInFirstScreen(e)})});e.length?(o=Math.max.apply(null,e),c.firstScreenInfo={element:null===(e=p[o])||void 0===e?void 0:e[0],timing:o,markDoms:p}):f.forEach(function(e){for(var t=0;t<e.roots.length;t++)e.rootsDomNum[t]>n&&d.isInFirstScreen(e.roots[t])&&(n=e.rootsDomNum[t],o=e.time,c.firstScreenInfo={element:e.roots[t],timing:o})});for(var t,r=document.querySelectorAll(".fp-check"),s=[],a=0;a<r.length;a++)"img"===r[a].tagName.toLowerCase()&&""!==r[a].src?s.push(r[a].src):(t=window.getComputedStyle(r[a]),(t=/url\(['"](.+)['"]\)/gi.exec(t.backgroundImage))&&2===t.length&&s.push(t[1]));var u=0;window.performance.getEntriesByType("resource").some(function(n){return s.some(function(e,t){return e===n.name&&(n.responseEnd>u&&(u=n.responseEnd),(n.fetchStart<o||n.startTime<o)&&n.responseEnd>o&&(i=!0,o=n.responseEnd),s.splice(t,1),!0)}),0===s.length}),0===o&&(o=u),null==l||l(i?o:o+25)},3e3)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){if(!e||"function"!=typeof e.getBoundingClientRect)return!1;var t=e.getBoundingClientRect(),n=window.innerHeight,e=window.innerWidth;return 0<=t.left&&t.left<e&&0<=t.top&&t.top<n},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var o=0;o<n.length;o++)t+=this.walkAndCount(n[o])}return t}})),oe=!1,ie=!1,re=(new L({name:"webVitals"}),new L({name:"webVitals",onNewAegis:function(e){if(a())try{!function(e,t){function n(e){var t=e.startTime;t<r.timeStamp?(i.value=t,i.entries.push(e)):i.isFinal=!0,o()}var o,t=1<arguments.length&&void 0!==t&&t,i=X("LCP"),r=W(),s=J("largest-contentful-paint",n);s&&(o=$(e,i,s,t),t=function(){i.isFinal||(s.takeRecords().map(n),i.isFinal=!0,o())},(z=z||new Promise(function(t){return["scroll","keydown","pointerdown"].map(function(e){addEventListener(e,t,{once:!0,passive:!0,capture:!0})})})).then(t),G(t,!0))}(this.publish.bind(this,e)),n=this.publish.bind(this,e),o=X("FID"),i=W(),r=J("first-input",t),s=$(n,o,r),r?G(function(){r.takeRecords().map(t),r.disconnect()},!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay(function(e,t){t.timeStamp<i.timeStamp&&(o.value=e,o.isFinal=!0,o.entries=[{entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+e}],s())}),function(e,t){function n(e){e.hadRecentInput||(i.value+=e.value,i.entries.push(e),o())}var o,t=1<arguments.length&&void 0!==t&&t,i=X("CLS",0),r=J("layout-shift",n);r&&(o=$(e,i,r,t),G(function(e){e=e.isUnloading;r.takeRecords().map(n),e&&(i.isFinal=!0),o()}))}(this.publish.bind(this,e))}catch(e){}function t(e){e.startTime<i.timeStamp&&(o.value=e.processingStart-e.startTime,o.entries.push(e),o.isFinal=!0,s())}var n,o,i,r,s},publish:function(e,t){var n,o=t.name,i=t.value,r={LCP:-1,FID:-1,CLS:-1},s=[];for(n in r)s.push(n+"="+(n===o?i:r[n]));var a=-1===e.config.performanceUrl.indexOf("?")?"?":"&";setTimeout(function(){e.send({url:e.config.webVitalsUrl+a+s.join("&"),type:m.VITALS})},0)}})),se=(new L({name:"tjg"}),!1),ae=new L({name:"tjg",onNewAegis:function(e){this.setTjgHeader(e)},setTjgHeader:function(e){se||(se=!0,this.overrideFetch(e),this.overrideXHR(e))},overrideFetch:function(n){var o=this;_({beforeFetch:function(e,t){o.isSameOrigin(e)&&(t.headers?t.headers instanceof Headers&&t.headers.append("X-Tjg-Json-Span-Context",o.getTjgHeaderValue(n)):t.headers=new Headers({"X-Tjg-Json-Span-Context":o.getTjgHeaderValue(n)}))}})},overrideXHR:function(o){var i=this;k({send:function(e,t){var n;i.isSameOrigin(e.aegisUrl)&&(n=i.getTjgHeaderValue(o),e.aegisTjgTrace=n,e.setRequestHeader("X-Tjg-Json-Span-Context",n))}})},getTjgHeaderValue:function(e){var t;return null===(t=window.btoa)||void 0===t?void 0:t.call(window,JSON.stringify({ids:{trace_id:{high:this.rand53(),low:this.rand53()},span_id:this.rand53(),parent_id:0,flag:2},baggages:{aegis_session_id:e.sessionID}}))},rand53:function(){return parseInt(new Array(53).fill(1).map(function(){return.5<Math.random()?1:0}).join(""),2)},isSameOrigin:function(e){var t=this,n=!1;if(this.$walk(function(e){!0===t.$getConfig(e).crossOrigin&&(n=!0)}),n)return!0;var o=document.createElement("a");return o.href=e,location.origin===o.origin}}),ue=function(e,t){var n,o={fetch:[],static:[]},i=new FormData;return Array.isArray(e)?e.forEach(function(e){var t=Q(e);o[e.type].push(t)}):(n=Q(e),o[e.type].push(n)),i.append("payload",JSON.stringify(N({duration:o},t))),i};Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if(null!=(o=arguments[n]))for(var o=Object(o),i=Object.keys(Object(o)),r=0,s=i.length;r<s;r++){var a=i[r],u=Object.getOwnPropertyDescriptor(o,a);null!=u&&u.enumerable&&(t[a]=o[a])}return t}});var ce,le,fe,de=0,pe=(I(le=he,fe=ce=S),le.prototype=null===fe?Object.create(fe):(ge.prototype=fe.prototype,new ge),he.prototype.getBean=function(t){var n=this;return void 0===t&&(t=[]),""+Object.getOwnPropertyNames(this.bean).filter(function(e){return-1===t.indexOf(e)}).map(function(e){return e+"="+n.bean[e]}).join("&")},he.prototype.send=function(e,t,n){var o=this;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)if(this.requesting)this.requestQueue.push({options:e,success:t,fail:n});else{this.requesting=!0;var i=e.url;!1!==e.addBean&&(i=i+(-1===i.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=i;var r=e.method||"get",i=this.config.onBeforeRequest;if(!(e=i?i(e,this):e)||!e.url)return console.error("Please handle the parameters reasonably, options.url is necessary");var s=new XMLHttpRequest;s.sendByAegis=!0,s.addEventListener("readystatechange",function(){var e;4===s.readyState&&(o.requesting=!1,(e=o.requestQueue.shift())&&o.send(e.options,e.success,e.fail),400<=s.status?null==n||n(s.response):null==t||t(s.response))}),"get"===r.toLocaleLowerCase()?(s.open("get",function(e,n){if("string"!=typeof e)return"";if("object"==typeof n&&n){var t=Object.getOwnPropertyNames(n).map(function(e){var t=n[e];return e+"="+("string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)))}).join("&").replace(/eval/gi,"evaI");return e+(-1===e.indexOf("?")?"?":"&")+t}return e}(e.url,e.data)),s.send()):(s.open("post",e.url),e.contentType&&s.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),s.send(e.data))}},he.useAsyncPlugin=function(s,e){var t=(e=void 0===e?{}:e).exportsConstructor,a=void 0===t?"aegis-plugin-"+de:t,t=e.onAegisInit,u=void 0===t?function(){}:t,e=e.onAegisInitAndPluginLoaded,c=void 0===e?function(){}:e;if(de+=1,"string"!=typeof s)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof u||"function"!=typeof c)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new L({name:"asyncPlugin",onNewAegis:function(t){try{u(t),he.asyncPlugin[s]?c(t,window[he.asyncPlugin[s]]):(e=s,n=a,o=function(e){e||(he.asyncPlugin[s]=a,e=window[a],c(t,e))},i=document.createElement("script"),r=document.head,"function"==typeof n&&(o=n,n=""),i.src=e,i.setAttribute("name",n),i.name=n,i.setAttribute("crossorigin","anonymous"),i.crossorigin="anonymous",i.async=!0,i.hasLoaded=!1,i.onreadystatechange=function(){i.hasLoaded||i.readyState&&"loaded"!==i.readyState&&"complete"!==i.readyState||(i.hasLoaded=!0,"function"==typeof o&&o(!1),setTimeout(function(){r.contains(i)&&r.removeChild(i)}))},i.onload=i.onreadystatechange,i.onerror=function(){"function"==typeof o&&o(!0),setTimeout(function(){r.contains(i)&&r.removeChild(i)})},r.appendChild(i))}catch(e){console.log("error on below is caused by "+s+" "),console.error(e)}var e,n,o,i,r}}))},he.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=void 0===e?{}:e,t=void 0===t?{}:t)},he.__version__="1.32.20",he.sessionID="session-"+Date.now(),he.asyncPlugin={},he.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.7.2/flog.core.min.js",shadowLog:""},he),S=(new L({name:"offlineLog"}),new L({name:"offlineLog",onNewAegis:function(e){var t=pe.urls.flog,u=e.config,c=[],l=null,f=null,d=function(e){f=e},p=function(e){c=c.concat(e)},h=function(e,t){l={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}};pe.useAsyncPlugin(t,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",p),e.lifeCycle.on("uploadLogs",h),e.lifeCycle.on("onConfigChange",d)},onAegisInitAndPluginLoaded:function(t,e){var n=u.dbConfig,o=void 0===n?{}:n,i=u.url,r=void 0===i?pe.urls.aegisCollect:i,s=u.offlineLogExp,n=void 0===s?3:s,i=u.id,s=u.uin;t.lifeCycle.remove("beforeWrite",p),t.lifeCycle.remove("uploadLogs",h),t.lifeCycle.remove("onConfigChange",d);o=Object.assign({lookupUrl:r+"/offlineAuto?id="+i+"&uin="+(s||""),preservedDay:n,id:i,uin:s},o,{sessionId:pe.sessionID});try{var a=new e(o);c.forEach(function(e){a.add(N(N({},e),{level:E.INFO_ALL?E.INFO:e.level}))}),t.lifeCycle.on("beforeWrite",function(e){(e=void 0===e?[]:e).forEach(function(e){a.add(N(N({},e),{level:E.INFO_ALL?E.INFO:e.level}))})}),t.lifeCycle.on("uploadLogs",function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),a.uploadLogs(Object.assign({id:u.id,uin:u.uin},e),t)}),t.lifeCycle.on("onConfigChange",function(e){a.setConfig(e)}),a.on("PERREVENT",function(e){t.send({type:m.OFFLINE,data:g({msg:b(e),level:E.INFO}),contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:u.url+"?id=893&sessionId="+pe.sessionID+"&uin="+u.uin+"&from="+u.id+"&count=1&version=1.32.20"})}),f&&(a.setConfig(f),f=null),l&&(t.lifeCycle.emit("uploadLogs",l.conds,l.params),l=null),t.flog=a}catch(t){console.log(t)}}})}})),fe=(new L({name:"spa"}),new L({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState;var e=(null===(e=location.href)||void 0===e?void 0:e.split("?"))[0];this.$fireUrl=e,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv)},wr:function(n){var o=history[n];return!("function"!=typeof o||!/native code/.test(o.toString()))&&function(){var e=o.apply(this,arguments),t=null;return"function"==typeof Event?t=new Event(n):(t=document.createEvent("HTMLEvents")).initEvent(n,!1,!0),window.dispatchEvent(t),e}},sendPv:function(){var n=this;setTimeout(function(){var t=location.href,e=(null===(e=location.href)||void 0===e?void 0:e.split("?"))[0];e&&e!==n.$fireUrl&&(n.$walk(function(e){e.send({url:e.config.whiteListUrl+"?from="+encodeURIComponent(t),beanFilter:["from"],type:m.WHITE_LIST})}),n.$fireUrl=e)},0)}}));function he(e){var o,i=ce.call(this,e)||this;i.requestQueue=[],i.requesting=!1,i.speedLogPipeline=x([h(i.config),d(i.config),(o=i,function(t,n){ee(function(e){o.extendBean("netType",e),n(t)})}),function(e,t){i.lifeCycle.emit("beforeReportSpeed",e);var n=i.config.beforeReportSpeed;if((e="function"==typeof n?e.filter(function(e){var t=!1!==n(e);return"fetch"===e.type&&void 0===e.ret&&e.payload&&(e.ret=R(e.payload.data.response,i.config.api)),t}):e).length)return t(e)},function(e){i.send({type:m.SPEED,url:""+i.config.speedUrl,method:"post",data:ue(e,i.bean)})}]),e.asyncPlugin=!0;try{e.uin=e.uin||parseInt((document.cookie.match(/\buin=\D+(\d*)/)||[])[1],10)||parseInt((document.cookie.match(/\bilive_uin=\D*(\d+)/)||[])[1],10)||"",i.init(e),i.extendBean("sessionId",he.sessionID),i.extendBean("from",encodeURIComponent(e.pageUrl||location.href)),i.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&i.extendBean("ext1",e.ext1),e.ext2&&i.extendBean("ext2",e.ext2),e.ext3&&i.extendBean("ext3",e.ext3)}catch(e){console.warn(e),console.log("%c以上错误发生在初始化 Aegis 的过程中，将会影响您正常使用 Aegis，\n建议您联系 aegis-helper，进行反馈，感谢您的支持。","color: red"),i.sendSDKError(e)}return i}function ge(){this.constructor=le}return new L({name:"ie"}),pe.use(te),pe.use(B),pe.use(C),pe.use(ne),pe.use(re),pe.use(T),pe.use(ae),pe.use(Z),pe.use(S),pe.use(fe),pe});
